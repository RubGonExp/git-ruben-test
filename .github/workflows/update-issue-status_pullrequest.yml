name: Merge Comment
on:
  pull_request:
    types: [closed, synchronize]
    # branches: [develop]
jobs:
  merge-comment:
    permissions: write-all
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Create Comment
        env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            BODY_TEXT: ${{ github.event.pull_request.body }}
        run: |
          urls=$(echo "$BODY_TEXT" | grep -oP '(?<=\().*?(?=\))')
          echo "$urls"
          for url in $urls; do
            curl -X POST -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" -H "Content-Type: application/json" -H "X-GitHub-Api-Version: 2022-11-28" "$url\comments" -d "{\"body\": \"Testing\"}"
          done